(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{25:function(e,t){e.exports="data:image/png;base64,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"},28:function(e,t,a){e.exports=a(42)},33:function(e,t,a){},34:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(24),l=a.n(i),c=a(2),o=a(3),s=a(8),u=a(6),m=a(7),d=a(10),p=a(12),h=(a(33),new(function(){function e(){Object(c.a)(this,e),this.authenticated=!1}return Object(o.a)(e,[{key:"login",value:function(e){this.authenticated=!0,e()}},{key:"logout",value:function(e){this.authenticated=!0,e()}},{key:"isAuthenticated",value:function(){return this.authenticated}}]),e}())),f=(a(34),a(25)),v=a.n(f),b=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"verifyIfItsAuth",value:function(){return h.isAuthenticated()?r.a.createElement("li",null,r.a.createElement(d.b,{to:"/login"}," Login")):r.a.createElement("li",null,r.a.createElement(d.b,{to:"/logout"}," Logout"))}},{key:"createHeaderVirtDOM",value:function(e){var t=r.a.createElement("img",{src:"../../mainIcon.png",width:"30",height:"30",className:"d-inline-block align-top",alt:""}),a=r.a.createElement("img",{src:v.a,width:"30",height:"30",className:"d-inline-block align-top",alt:""});return"root"===e?r.a.createElement("nav",{className:"navbar navbar-expand-sm navbar-dark bg-dark"},r.a.createElement("a",{className:"navbar-brand",href:"/"},t," 3D PrinNet"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarText","aria-controls":"navbarText","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarText"},r.a.createElement("div",{className:"dropdown ","aria-labelledby":"navbarText"},r.a.createElement("button",{className:"btn btn-sm btn-secondary dropdown-toggle",type:"button",id:"dropdownMenu","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},a),r.a.createElement("div",{className:"dropdown-menu dropdown-menu-right"},r.a.createElement("button",{className:"dropdown-item",type:"button"},r.a.createElement(d.b,{to:"/login"}," Login")),r.a.createElement("button",{className:"dropdown-item",type:"button"},r.a.createElement(d.b,{to:"/register"}," Register")))))):r.a.createElement("nav",{className:"navbar navbar-expand-sm navbar-dark bg-dark"},r.a.createElement("a",{className:"navbar-brand",href:"/"},t," 3D PrinNet"))}},{key:"render",value:function(){var e=this.createHeaderVirtDOM(this.props.type);return r.a.createElement("div",{className:"Header"},e)}}]),t}(n.Component),E=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={printers:[]},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"getList",value:function(){return fetch("".concat(this.props.server_url,"/"),{method:"GET",headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).catch(function(e){return console.error(e)})}},{key:"loadList",value:function(){var e=this;return this.getList().then(function(t){e.setState({printers:t})})}},{key:"componentDidMount",value:function(){this.loadList()}},{key:"createPrintersListVirtDOM",value:function(e){return void 0===e?"":e.map(function(e,t){return r.a.createElement("li",{key:t},r.a.createElement("div",{className:"card",style:{width:"18rem"}},r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},"Main printer model: ".concat(e.printers.length?e.printers[0].model:"NA")),r.a.createElement("h6",{className:"card-subtitle mb-2 text-muted"}," ","Specs: ".concat(e.printers.length?e.printers[0].specs:"NA")),r.a.createElement("p",{className:"card-text"},"Address: ".concat(e.address)),r.a.createElement(d.b,{to:{pathname:"/profile/".concat(e.username),state:{username:e.username,accessType:"public"}}}," ","".concat(e.username,"'s profile")))))})}},{key:"render",value:function(){var e=this.createPrintersListVirtDOM(this.state.printers);return r.a.createElement("div",null,r.a.createElement("div",{className:"jumbotron jumbotron-fluid"},r.a.createElement("div",{className:"container"},r.a.createElement("h3",{className:"display-4"},"Printer's list"))),r.a.createElement("ul",null,e))}}]),t}(n.Component),g=function(e){return r.a.createElement("div",null,r.a.createElement(b,{type:"root"}),r.a.createElement(E,e))},y=a(13),S=a(4),w=(a(39),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).renderRedirect=function(){if(a.state.redirect)return r.a.createElement(p.a,{push:!0,to:{pathname:"/profile",state:{username:a.state.username,accessType:"private",token:a.state.token}}})},a.state={username:"",password:"",redirect:!1,token:""},a.handleChange=a.handleChange.bind(Object(S.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(S.a)(a)),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"validateForm",value:function(){var e=this.state,t=e.username,a=e.password;return 0<t.length&&0<a.length}},{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(y.a)({},a,n))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=this.state;fetch("".concat(this.props.server_url,"/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then(function(e){return e.json()}).then(function(e){return t.handleResponse(e)}).catch(function(e){return console.log("Error:",e)})}},{key:"handleResponse",value:function(e){console.log("[Login] Update profile module with:",e.username),console.log("[Login] Token:",e.token),""!==e.username?this.setState({username:e.username,redirect:!0,token:e.token}):console.log("[Login] User not found")}},{key:"render",value:function(){return r.a.createElement("div",{className:"Login"},this.renderRedirect(),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null," Username"),r.a.createElement("input",{type:"text",className:"form-control",placeholder:"",name:"username",value:this.state.value,onChange:this.handleChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null," Password"),r.a.createElement("input",{type:"password",className:"form-control",placeholder:"",name:"password",value:this.state.value,onChange:this.handleChange})),r.a.createElement("button",{type:"submit",className:"btn btn-primary col text-center",disabled:!this.validateForm()}," Login")))}}]),t}(n.Component)),k=function(e){return r.a.createElement("div",null,r.a.createElement(b,{type:"login"}),r.a.createElement(w,e))},N=(a(40),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).renderRedirect=function(){if(a.state.redirect)return r.a.createElement(p.a,{push:!0,to:{pathname:"/profile",state:{username:a.state.username,accessType:"private"}}})},a.state={email:"",password:"",confirmPassword:"",username:"",redirect:!1},a.handleChange=a.handleChange.bind(Object(S.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(S.a)(a)),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"validateForm",value:function(){var e=this.state,t=e.email,a=e.password,n=e.confirmPassword;return 0<t.length&&0<a.length&&0<n}},{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(y.a)({},a,n))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=this.state,n=this.state,r=n.email,i=n.password,l=n.confirmPassword;console.log("User register: ".concat(r,", submit event")),i===l?fetch("".concat(this.props.server_url,"/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then(function(e){return e.json()}).then(function(e){return t.setState({username:e.username,redirect:!0})}).catch(function(e){return console.error("Error:",e)}):alert("Password and confirmPassword doesn't match")}},{key:"render",value:function(){return r.a.createElement("div",{className:"Register"},this.renderRedirect(),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null," Email"),r.a.createElement("input",{type:"text",className:"form-control",placeholder:"",name:"email",value:this.state.value,onChange:this.handleChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null," Password"),r.a.createElement("input",{type:"password",className:"form-control",placeholder:"",name:"password",value:this.state.value,onChange:this.handleChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null," Confirm password"),r.a.createElement("input",{type:"password",className:"form-control",placeholder:"",name:"confirmPassword",value:this.state.value,onChange:this.handleChange})),r.a.createElement("button",{type:"submit",className:"btn btn-primary col text-center",disabled:!this.validateForm()}," Register")))}}]),t}(n.Component)),O=function(e){return r.a.createElement("div",null,r.a.createElement(b,{type:"register"}),r.a.createElement(N,e))},P=a(17),A=a(16),j=(a(41),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={private:{email:{type:String,lowercase:!0},password:String,fullname:String,birth:Date,defaultPrinterInfo:{username:String,model:String,specs:String}},public:{username:String,address:String,printers:[{index:Number,model:String,specs:String,status:{type:String,enum:["Available","Ready","Busy","Not Available"]}}]},ready:!1},a.handleChange=a.handleChange.bind(Object(S.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(S.a)(a)),a.addNewPrinter=a.addNewPrinter.bind(Object(S.a)(a)),a.removeLastPrinter=a.removeLastPrinter.bind(Object(S.a)(a)),console.log("[Profile]",a.props),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"validateForm",value:function(){return"private"===this.props.location.state.accessType}},{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value,r=a.split(":"),i=Object(A.a)({},this.state),l=!0;"private"===r[0]?"defaultPrinterInfo"!==r[1]?i.private["".concat(r[1])]=n:i.private.defaultPrinterInfo["".concat(r[2])]=n:"public"===r[0]?"printers"!==r[1]?i.public["".concat(r[1])]=n:i.public.printers["".concat(r[2])]["".concat(r[3])]=n:l=!1,l&&this.setState({public:i.public,private:i.private})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.updateUserInfo(this.state)}},{key:"updateUserInfo",value:function(e){return console.log("[Profile] Update user info"),fetch("".concat(this.props.server_url,"/profile"),{method:"PUT",headers:{Authorization:"Bearer ".concat(this.props.location.state.token),"Content-Type":"application/json"},body:JSON.stringify(e)}).then(function(e){return console.log(e)}).catch(function(e){return console.error("Error:",e)})}},{key:"getUserInfo",value:function(e){return fetch("".concat(this.props.server_url,"/profile"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(function(e){return e.json()}).catch(function(e){return console.error("Error:",e)})}},{key:"loadUserInfo",value:function(){var e=this,t={username:"",accessType:""};return this.props.location.state&&(t.username=this.props.location.state.username,t.accessType=this.props.location.state.accessType),console.log("[Profile] load user:".concat(t)),this.getUserInfo(t).then(function(t){e.setState({private:t.private,public:t.public,ready:!0})})}},{key:"addNewPrinter",value:function(e){e.preventDefault();var t=Object(A.a)({},this.state),a={index:t.public.printers.length+1,model:"",specs:"",status:"Not Available"};t.public.printers.push(a),this.setState({public:t.public,private:t.private})}},{key:"removeLastPrinter",value:function(e){e.preventDefault();var t=Object(A.a)({},this.state);t.public.printers.length&&(t.public.printers.pop(),this.setState({public:t.public,private:t.private}))}},{key:"parseProfilePrivateInfo",value:function(e){var t=e.private,a=[];for(var n in t){var r={type:"password"===n||"email"===n?n:"text",placeholder:"".concat(t[n]),name:"".concat("private",":").concat(n),value:this.state.private[n],onChange:this.handleChange,disabled:"password"===n||"email"===n};"defaultPrinterInfo"!==n&&a.push(r)}for(var i in t.defaultPrinterInfo){var l={type:"password"===i||"email"===i?i:"text",placeholder:"".concat(t.defaultPrinterInfo[i]),name:"".concat("private",":defaultPrinterInfo:").concat(i),value:this.state.private.defaultPrinterInfo[i],onChange:this.handleChange,disabled:"password"===i||"email"===i};a.push(l)}return a}},{key:"parseProfilePublicInfo",value:function(e){var t=this,a=e.public,n=[];for(var r in a)if("printers"!==r){var i={type:"text",placeholder:"".concat(a[r]),name:"".concat("public",":").concat(r),value:this.state.public[r],disabled:!1};n.push(i)}return a.printers.length&&a.printers.forEach(function(e){for(var a in e){var r={type:"text",placeholder:"".concat(e[a]),name:"".concat("public",":printers:").concat(e.index-1,":").concat(a),value:t.state.public.printers["".concat(e.index-1)]["".concat(a)],disabled:"index"===a};n.push(r)}}),n}},{key:"createProfileFormInfo",value:function(e){var t=this;return e.map(function(e,a){return r.a.createElement("div",{className:"form-group row col",key:a},r.a.createElement("label",{className:"col-sm-2 col-form-label col-form-label-sm"},"".concat(e.name)),r.a.createElement("div",{className:"col-sm-10"},r.a.createElement("input",{className:"form-control",type:"".concat(e.type),placeholder:"".concat(e.placeholder),name:"".concat(e.name),value:"".concat(e.value),onChange:t.handleChange,disabled:"public"===t.props.location.state.accessType||e.disabled})))})}},{key:"createProfileInfoVirtDOM",value:function(e){var t=e,a=[];if(""!==t.public.username){var n=[];n="private"===this.props.location.state.accessType?[].concat(Object(P.a)(this.parseProfilePrivateInfo(t)),Object(P.a)(this.parseProfilePublicInfo(t))):Object(P.a)(this.parseProfilePublicInfo(t)),a=this.createProfileFormInfo(n)}return this.validateForm()?r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("h2",null," Profile's info"),a,r.a.createElement("button",{onClick:this.addNewPrinter,className:"btn btn-primary",type:"button"},"+ Printer"),r.a.createElement("button",{onClick:this.removeLastPrinter,className:"btn btn-primary",type:"button"},"- Printer"),r.a.createElement("button",{type:"submit",className:"btn btn-primary col col-sm-6 text-center",disabled:!this.validateForm()}," Update"))):r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("h2",null," Profile's info"),a)}},{key:"componentDidMount",value:function(){this.loadUserInfo()}},{key:"render",value:function(){var e="";return!0===this.state.ready&&(e=this.createProfileInfoVirtDOM(this.state)),r.a.createElement("div",{className:"Profile"},e)}}]),t}(n.Component)),C=function(e){return r.a.createElement("div",null,r.a.createElement(b,{type:"profile"}),r.a.createElement(j,e))},x="https://thawing-peak-48129.herokuapp.com",R=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(d.a,{basename:"/"},r.a.createElement("div",null,r.a.createElement(p.d,null,r.a.createElement(p.b,{exact:!0,path:"/",render:function(){return r.a.createElement(g,{server_url:x})}}),r.a.createElement(p.b,{exact:!0,path:"/login",render:function(){return r.a.createElement(k,{server_url:x})}}),r.a.createElement(p.b,{path:"/profile/:username?",render:function(e){return r.a.createElement(C,Object.assign({server_url:x},e))}}),r.a.createElement(p.b,{exact:!0,path:"/register",render:function(){return r.a.createElement(O,{server_url:x})}}))))}}]),t}(n.Component);l.a.render(r.a.createElement(R,null),document.getElementById("root"))}},[[28,1,2]]]);
//# sourceMappingURL=main.f22cf870.chunk.js.map